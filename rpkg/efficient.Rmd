---
title: "Readable and efficient R code"
author: "Michael Love"
date: 10/19/2018
output: html_document
---

# Why write readable and efficient code?

In this document we will discuss some strategies for writing readable
and efficient code in R (the strategies may sometimes extend to
other high-level programming languages like python, Julia, or Matlab).
First, why do we care about these *secondary* properties of our
code. Perhaps the most important thing about an implementation of a
statistical method is that it *works*. You want it to be accurate, in
that you have faithfully translated the mathematical formulation of a
statistical method into code and that it runs without crashing on
typical input data. This is true, and yet these other properties are
also very important.

The main reason to care about readability and efficiency is because
*you want others to use your method, or be able to understand your
analysis*. There is a lot of chance involved in your method becoming
popular, but you give yourself a much better chance if it can be
easily understood by reading the code, and if it has been written in a
clever way, avoiding unnecessary inefficiencies. And similarly,
someone is more likely to trust your analysis if it doesn't look
like [spaghetti code](https://en.wikipedia.org/wiki/Spaghetti_code).

Trust that someone will probably look at your code (whether for a
method or a published analysis) and decide whether it makes sense.

**Readable code** for a high-level programming language will look
similar across whatever language you use. 

* *Visual space:* Code within a file is broken into meaningful chunks, and code
withing a project is broken into meaningful files (this varies a bit
from person to person). 
* *Non-repeating:* Functions are used to define operations that will
  be repeated more than once. There should almost never be any code
  that looks as if it were *copy-pasted* within a project. Variations
  among similar code chunks can be turned into arguments of a
  function.
* *Inline documentation:* User-facing functions should have arguments
  that are documented above the function, along with a description of
  what the function returns. (We will discuss strategies for doing
  this in R using *roxygen2* and the *devtools* package.)
* *Comments:* Use lots of comments to describe the choices that are
  made in the code. It's difficult to actually provide *too many*
  comments. This helps others, and it will certainly help yourself in
  the future as you return to your code to make sense of what you were
  trying to do.

**Efficient code**

